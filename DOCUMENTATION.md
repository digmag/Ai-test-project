# Hospital Management Application - Документация

## Общее описание

Hospital Management - это веб-приложение для управления больничной системой, реализованное на Python с использованием фреймворка Tornado и базы данных Redis. Приложение позволяет управлять больницами, врачами, пациентами, диагнозами и связями между ними.

## Технологический стек

- **Backend**: Python 3.9 с фреймворком Tornado
- **Database**: Redis
- **Frontend**: HTML шаблоны с Bootstrap CSS
- **Containerization**: Docker и Docker Compose
- **CI/CD**: GitHub Actions
- **Testing**: Unit-тесты с использованием unittest

## Архитектура приложения

### Структура проекта
```
├── main.py                 # Основное приложение
├── requirements.txt        # Зависимости
├── Dockerfile             # Файл для сборки Docker-образа
├── docker-compose.yml     # Конфигурация для запуска контейнеров
├── .dockerignore          # Файл исключений для Docker
├── static/                # Статические файлы (CSS, JS)
├── templates/             # HTML шаблоны
├── test_app.py            # Unit-тесты
├── .github/workflows/     # GitHub Actions workflow
└── README.md              # Документация
```

### Структура базы данных (Redis)

Приложение использует Redis для хранения данных в виде хешей:

- `hospital:*` - информация о больницах
- `doctor:*` - информация о врачах
- `patient:*` - информация о пациентах
- `diagnosis:*` - информация о диагнозах
- `doctor-patient:*` - связи между врачами и пациентами
- `*autoID` - автоматические идентификаторы для каждого типа сущности

## Функциональность

### Модуль больниц
- Создание новых больниц
- Просмотр списка больниц
- Валидация обязательных полей (название и адрес)

### Модуль врачей
- Создание новых врачей
- Просмотр списка врачей
- Привязка к больнице
- Валидация обязательных полей (фамилия и профессия)

### Модуль пациентов
- Создание новых пациентов
- Просмотр списка пациентов
- Валидация пола (M/F)
- Валидация обязательных полей

### Модуль диагнозов
- Создание новых диагнозов
- Привязка к пациенту
- Валидация обязательных полей

### Модуль связей врач-пациент
- Создание связей между врачами и пациентами
- Просмотр существующих связей

## API endpoints

- `/` - главная страница
- `/hospital` - управление больницами
- `/doctor` - управление врачами
- `/patient` - управление пациентами
- `/diagnosis` - управление диагнозами
- `/doctor-patient` - управление связями врач-пациент

## Запуск приложения

### Локальный запуск

1. Установите Python 3.9
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
3. Установите и запустите Redis
4. Запустите приложение:
   ```bash
   python main.py
   ```
5. Откройте в браузере: http://localhost:8888

### Запуск в Docker

1. Установите Docker и Docker Compose
2. Запустите приложение:
   ```bash
   docker-compose up -d
   ```
3. Откройте в браузере: http://localhost:8888

## Тестирование

### Unit-тесты

Для запуска unit-тестов выполните:
```bash
python -m unittest test_app.py -v
```

Тесты покрывают:
- Все основные обработчики
- Валидацию данных
- Обработку ошибок
- Подключение к Redis

## CI/CD Pipeline

### GitHub Actions workflow

Файл: `.github/workflows/ci-cd.yml`

Содержит следующие джобы:
- `test`: запуск unit-тестов
- `build`: сборка Docker-образа и тестирование
- `build-and-deploy-pages`: создание и деплой документации на GitHub Pages

### Триггеры
- При пуше в ветки `main` или `master`
- При pull request в ветки `main` или `master`

## Контейнеризация

### Dockerfile

Содержит:
- Базовый образ Python 3.9
- Установку зависимостей
- Копирование исходного кода
- Открытие порта 8888
- Запуск приложения

### docker-compose.yml

Содержит:
- Сервис Redis
- Сервис приложения
- Настройки подключения между сервисами
- Настройки портов
- Настройки volumes

## Безопасность

- Валидация всех входных данных
- Проверка существования зависимых сущностей
- Обработка ошибок подключения к базе данных
- Проверка корректности пола у пациентов

## Ошибки и обработка исключений

- Обработка ошибок подключения к Redis
- Валидация обязательных полей
- Проверка существования связанных сущностей
- Возврат соответствующих HTTP-кодов ошибок

## Ограничения

- Приложение не может быть размещено на GitHub Pages из-за его архитектуры (серверное приложение)
- GitHub Pages используется только для документации
- Требуется работающий Redis-сервер

## Масштабирование

- Приложение может быть масштабировано с помощью Docker Compose
- Поддержка многопоточности зависит от Tornado
- Redis обеспечивает быстрый доступ к данным

## Техническое обслуживание

- Регулярное тестирование с помощью unit-тестов
- Мониторинг подключения к базе данных
- Обновление зависимостей
- Проверка безопасности

## Развитие проекта

- Добавление новых типов сущностей
- Улучшение интерфейса пользователя
- Добавление аутентификации и авторизации
- Интеграция с внешними системами

## Заключение

Hospital Management - это полностью функциональное веб-приложение с возможностью контейнеризации, автоматизированного тестирования и CI/CD. Приложение соответствует современным стандартам разработки и готово к использованию в образовательных и демонстрационных целях.